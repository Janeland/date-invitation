<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Special Invitation</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState } = React;

        const firebaseConfig = {
            apiKey: "AIzaSyB9GkuCBuStBLDrzP7ilELuLcBfXATORRw",
            authDomain: "date-invitation-bc8ff.firebaseapp.com",
            databaseURL: "https://date-invitation-bc8ff-default-rtdb.firebaseio.com",
            projectId: "date-invitation-bc8ff",
            storageBucket: "date-invitation-bc8ff.firebasestorage.app",
            messagingSenderId: "853070084785",
            appId: "1:853070084785:web:aab095fd790f284e25c090",
            measurementId: "G-SZ6NR63T5Z"
        };

        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const database = firebase.database();

        const Heart = ({ className, strokeWidth, fill }) => (
            <svg className={className} fill={fill || "none"} stroke="currentColor" strokeWidth={strokeWidth || 2} viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />
            </svg>
        );

        const Calendar = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" strokeWidth={2} viewBox="0 0 24 24">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
                <line x1="16" y1="2" x2="16" y2="6" />
                <line x1="8" y1="2" x2="8" y2="6" />
                <line x1="3" y1="10" x2="21" y2="10" />
            </svg>
        );

        const Sparkles = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" strokeWidth={2} viewBox="0 0 24 24">
                <path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364-.707-.707M6.343 6.343l-.707-.707m12.728 0-.707.707M6.343 17.657l-.707.707" />
            </svg>
        );

        const ChevronRight = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" strokeWidth={2} viewBox="0 0 24 24">
                <polyline points="9 18 15 12 9 6" />
            </svg>
        );

        function DateInvitation() {
            const [step, setStep] = useState(0);
            const [answers, setAnswers] = useState({});
            const [finalChoice, setFinalChoice] = useState(null);
            const [sessionId] = useState(() => 'session_' + Date.now());

            const handleAnswer = (question, answer) => {
                const newAnswers = { ...answers, [question]: answer };
                setAnswers(newAnswers);
                database.ref('responses/' + sessionId).update({
                    [question]: answer,
                    timestamp: Date.now(),
                    lastUpdated: new Date().toISOString()
                }).catch(err => console.error('Firebase error:', err));
            };

            const saveFinalDecision = (decision, choice = null) => {
                database.ref('responses/' + sessionId).update({
                    finalDecision: decision,
                    finalChoice: choice,
                    completedAt: new Date().toISOString(),
                    allAnswers: answers
                }).catch(err => console.error('Firebase error:', err));
            };

            const questions = [
                {
                    id: 'vibe',
                    question: "What kind of vibe are you feeling?",
                    options: [
                        { value: 'adventurous', label: 'Adventurous & Spontaneous', emoji: 'üåü' },
                        { value: 'cozy', label: 'Cozy & Intimate', emoji: 'üïØÔ∏è' }
                    ]
                },
                {
                    id: 'food',
                    question: "Okay, food... what sounds good?",
                    options: [
                        { value: 'fancy', label: "Fancy Dinner (I'll dress up!)", emoji: 'üçΩÔ∏è' },
                        { value: 'casual', label: 'Something Casual & Fun', emoji: 'üçï' },
                        { value: 'surprise', label: 'You Choose!', emoji: '‚ú®' }
                    ]
                },
                {
                    id: 'activity',
                    question: "How do you wanna spend the time?",
                    options: [
                        { value: 'outdoor', label: 'Outdoor Adventures', emoji: 'üå≤' },
                        { value: 'indoor', label: 'Cozy Indoor Stuff', emoji: 'üè†' },
                        { value: 'mixed', label: 'A Little Bit of Everything', emoji: 'üé≠' }
                    ]
                },
                {
                    id: 'energy',
                    question: "Last one! What's your ideal energy?",
                    options: [
                        { value: 'high', label: 'High Energy & Exciting!', emoji: '‚ö°' },
                        { value: 'chill', label: 'Relaxed & Peaceful', emoji: 'üåô' }
                    ]
                }
            ];

            const currentQuestion = questions[step - 2];

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 flex items-center justify-center p-6">
                    <div className="max-w-xl w-full">
                        {step === 0 && (
                            <div className="text-center space-y-8 animate-fadeIn">
                                <div className="inline-block">
                                    <Heart className="w-16 h-16 text-rose-400 animate-pulse" strokeWidth={1.5} />
                                </div>
                                <div className="space-y-3">
                                    <h1 className="text-5xl font-light text-slate-800 tracking-tight">So... um</h1>
                                    <p className="text-slate-500 text-lg">I've been wanting to ask you something</p>
                                </div>
                                <button onClick={() => setStep(1)} className="group inline-flex items-center gap-2 bg-slate-800 text-white px-8 py-3 rounded-full hover:bg-slate-700 transition-all duration-300">
                                    <span>Open</span>
                                    <ChevronRight className="w-4 h-4 group-hover:translate-x-1 transition-transform" />
                                </button>
                            </div>
                        )}

                        {step === 1 && (
                            <div className="bg-white/70 backdrop-blur-xl rounded-3xl shadow-xl p-10 space-y-8 animate-fadeIn">
                                <div className="text-center space-y-6">
                                    <div className="flex justify-center gap-4">
                                        <div className="bg-rose-100 rounded-2xl p-4 inline-block">
                                            <Calendar className="w-6 h-6 text-rose-500" />
                                        </div>
                                    </div>
                                    <h2 className="text-3xl font-light text-slate-800">So... about December 31st & January 1st</h2>
                                    <div className="space-y-4 text-left max-w-md mx-auto">
                                        <div className="flex items-start gap-4 p-4 bg-rose-50/50 rounded-2xl">
                                            <div className="text-3xl">üéÇ</div>
                                            <div>
                                                <p className="font-medium text-slate-800">It's your birthday!</p>
                                                <p className="text-sm text-slate-500">and honestly the best day of the year</p>
                                            </div>
                                        </div>
                                        <div className="flex items-start gap-4 p-4 bg-blue-50/50 rounded-2xl">
                                            <div className="text-3xl">‚ú®</div>
                                            <div>
                                                <p className="font-medium text-slate-800">And then it's New Year's</p>
                                                <p className="text-sm text-slate-500">perfect timing for a fresh start, right?</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="pt-4 pb-2">
                                        <p className="text-xl text-slate-700 leading-relaxed">I know this might sound silly but... would you maybe want to spend these two days with me?</p>
                                        <p className="text-sm text-slate-500 mt-2">I just really want to be there for your birthday and to start the new year together üí≠</p>
                                    </div>
                                </div>
                                <div className="flex gap-4 justify-center pt-4">
                                    <button onClick={() => { saveFinalDecision('accepted'); setStep(2); }} className="bg-slate-800 text-white px-8 py-3 rounded-full hover:bg-slate-700 transition-all duration-300 font-medium">I'd love to</button>
                                    <button onClick={() => { saveFinalDecision('thinking'); setStep(10); }} className="bg-slate-100 text-slate-700 px-8 py-3 rounded-full hover:bg-slate-200 transition-all duration-300 font-medium">Let me think</button>
                                </div>
                            </div>
                        )}

                        {step >= 2 && step <= 5 && currentQuestion && (
                            <div className="bg-white/70 backdrop-blur-xl rounded-3xl shadow-xl p-10 space-y-8 animate-fadeIn">
                                <div className="text-center space-y-4">
                                    <div className="flex justify-center gap-2 mb-4">
                                        {questions.map((_, idx) => (
                                            <div key={idx} className={`h-1.5 rounded-full transition-all duration-300 ${idx < step - 1 ? 'w-8 bg-slate-800' : 'w-1.5 bg-slate-200'}`} />
                                        ))}
                                    </div>
                                    <h3 className="text-2xl font-light text-slate-800">{currentQuestion.question}</h3>
                                    <p className="text-sm text-slate-500">(just trying to understand what would make you happiest ü•∫)</p>
                                </div>
                                <div className="space-y-3">
                                    {currentQuestion.options.map((option) => (
                                        <button key={option.value} onClick={() => { handleAnswer(currentQuestion.id, option.value); setTimeout(() => setStep(step + 1), 300); }} className="w-full p-5 bg-slate-50 hover:bg-slate-100 rounded-2xl transition-all duration-300 flex items-center gap-4 group border border-slate-200 hover:border-slate-300">
                                            <span className="text-3xl">{option.emoji}</span>
                                            <span className="text-slate-700 font-medium flex-grow text-left">{option.label}</span>
                                            <ChevronRight className="w-5 h-5 text-slate-400 group-hover:translate-x-1 transition-transform" />
                                        </button>
                                    ))}
                                </div>
                            </div>
                        )}

                        {step === 6 && (
                            <div className="bg-white/70 backdrop-blur-xl rounded-3xl shadow-xl p-10 space-y-8 animate-fadeIn">
                                <div className="text-center space-y-4">
                                    <Sparkles className="w-12 h-12 text-amber-400 mx-auto" />
                                    <h3 className="text-2xl font-light text-slate-800">Okay, last thing I promise!</h3>
                                    <p className="text-slate-600">How do you want me to plan this?</p>
                                </div>
                                <div className="grid gap-4">
                                    <button onClick={() => { setFinalChoice('mystery'); saveFinalDecision('accepted', 'mystery'); setStep(7); }} className="group p-6 bg-gradient-to-br from-purple-50 to-pink-50 hover:from-purple-100 hover:to-pink-100 rounded-2xl transition-all duration-300 border border-purple-200 hover:border-purple-300">
                                        <div className="flex items-center gap-4">
                                            <div className="text-4xl">üéÅ</div>
                                            <div className="text-left flex-grow">
                                                <h4 className="font-semibold text-slate-800 mb-1">Let me surprise you?</h4>
                                                <p className="text-sm text-slate-600">I promise I'll make it special (no pressure though!)</p>
                                            </div>
                                            <ChevronRight className="w-5 h-5 text-slate-400 group-hover:translate-x-1 transition-transform" />
                                        </div>
                                    </button>
                                    <button onClick={() => { setFinalChoice('together'); saveFinalDecision('accepted', 'together'); setStep(7); }} className="group p-6 bg-gradient-to-br from-blue-50 to-cyan-50 hover:from-blue-100 hover:to-cyan-100 rounded-2xl transition-all duration-300 border border-blue-200 hover:border-blue-300">
                                        <div className="flex items-center gap-4">
                                            <div className="text-4xl">üí¨</div>
                                            <div className="text-left flex-grow">
                                                <h4 className="font-semibold text-slate-800 mb-1">Let's plan it together!</h4>
                                                <p className="text-sm text-slate-600">We can figure it out as a team :)</p>
                                            </div>
                                            <ChevronRight className="w-5 h-5 text-slate-400 group-hover:translate-x-1 transition-transform" />
                                        </div>
                                    </button>
                                </div>
                            </div>
                        )}

                        {step === 7 && (
                            <div className="bg-white/70 backdrop-blur-xl rounded-3xl shadow-xl p-10 space-y-8 animate-fadeIn text-center">
                                <div className="space-y-6">
                                    <div className="inline-block bg-rose-100 rounded-full p-6">
                                        <Heart className="w-12 h-12 text-rose-500" />
                                    </div>
                                    <h2 className="text-3xl font-light text-slate-800">{finalChoice === 'mystery' ? "Okay!! I got this! üéÅ" : "Yay! Let's do it! üí¨"}</h2>
                                    <div className="max-w-md mx-auto space-y-4">
                                        {finalChoice === 'mystery' ? (
                                            <>
                                                <p className="text-slate-600 leading-relaxed">So... I'm actually really excited about this! I'll take care of everything, you just need to show up and let me try to make it amazing for you ü•∫</p>
                                                <div className="bg-amber-50 border border-amber-200 rounded-2xl p-4 mt-4">
                                                    <p className="text-sm text-slate-700">(I took notes on everything you said btw ‚úì)</p>
                                                </div>
                                            </>
                                        ) : (
                                            <>
                                                <p className="text-slate-600 leading-relaxed">Perfect! I have some ideas based on what you told me, but I really wanna hear what you're thinking too. This is gonna be fun planning together!</p>
                                                <div className="bg-blue-50 border border-blue-200 rounded-2xl p-4 mt-4">
                                                    <p className="text-sm text-slate-700">Can we maybe talk about it soon? üí≠</p>
                                                </div>
                                            </>
                                        )}
                                    </div>
                                    <div className="pt-6 space-y-2">
                                        <div className="flex items-center justify-center gap-2 text-rose-400">
                                            <Heart className="w-4 h-4 text-rose-400" fill="currentColor" />
                                            <p className="text-sm text-slate-600">honestly can't wait to spend these days with you</p>
                                            <Heart className="w-4 h-4 text-rose-400" fill="currentColor" />
                                        </div>
                                        <p className="text-xs text-slate-400">Dec 31, 2025 ‚Üí Jan 1, 2026</p>
                                    </div>
                                </div>
                            </div>
                        )}

                        {step === 10 && (
                            <div className="bg-white/70 backdrop-blur-xl rounded-3xl shadow-xl p-10 space-y-6 animate-fadeIn text-center">
                                <div className="text-6xl mb-4">ü§ç</div>
                                <h3 className="text-2xl font-light text-slate-800">That's totally okay!</h3>
                                <p className="text-slate-600 max-w-sm mx-auto">No rush at all, seriously. Take all the time you need and just let me know whenever you feel ready (or not, that's okay too)</p>
                                <button onClick={() => setStep(1)} className="text-slate-500 hover:text-slate-700 text-sm mt-4 inline-flex items-center gap-2">
                                    <span>‚Üê</span> Go back
                                </button>
                            </div>
                        )}
                    </div>

                    <style>{`
                        @keyframes fadeIn {
                            from { opacity: 0; transform: scale(0.95); }
                            to { opacity: 1; transform: scale(1); }
                        }
                        .animate-fadeIn { animation: fadeIn 0.4s ease-out; }
                        .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
                        @keyframes pulse {
                            0%, 100% { opacity: 1; }
                            50% { opacity: 0.5; }
                        }
                    `}</style>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<DateInvitation />);
    </script>
</body>
</html>